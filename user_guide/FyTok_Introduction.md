---
myst:
  substitutions:
    FyTok: _Fy_<font color="blue" />__Tok__
    SpDM: _Sp_<font color="blue" />__DM__
---

# 概述

托卡马克是一个由多个复杂子系统耦合而成的大科学系统装置。每个子系统中都蕴含了具有不同时空尺度、不同物理机制的复杂过程。这些物理过程各自成体系，又相互紧密联系。很难用单一数值模型描述整个复杂体系的多时空尺度过程。所以，需要分别对各个子系统上的不同物理过程进行建模，形成针对单独子系统的数值模型，并使子系统间的相互作用以数据的方式在模型中传递。最终，将子系统数值模型整合在一起形成全装置的“模拟器”，即所谓的“集成建模”。

几十年来，聚变领域内针对不同物理过程开发了许多优秀、完善数值模型和模拟分析程序。将这些程序整合在一个的架构下，完成耦合，实现整体装置的模拟。传统程序的开发时间跨越了几个世代，地域上也遍布全球各地，开发语言各异，接口不统一。这些程序的集成耦合是一个极具挑战性的任务。多年来随着托卡马克工程和物理研究的深入，集成建模和分析程序的开发，已经从原本单一、孤立的专有数值计算程序，向开放、灵活的数据处理平台发展，更加强调数据的共享、交流和管理。

为此 ITER 组织开发了集成建模与分析软件套件（Integrated Modelling & Analysis Suite，IMAS）。IMAS 是一个开放的、灵活的数据处理平台，它的核心是数据字典（Data Dictionary，DD）。IMAS 的数据字典是一个包含了托卡马克物理实验的所有物理量的数据模型，它定义了托卡马克物理实验的数据结构、数据格式、数据语义、数据关系等。IMAS 的数据字典是一个标准的、统一的、开放的数据模型，它为托卡马克物理实验的数据处理提供了统一的数据语义，使得不同物理模型之间的数据交互成为可能。IMAS 的数据字典是一个动态的数据模型，它可以随着托卡马克物理实验的发展而不断完善，可以随着托卡马克物理实验的发展而不断扩展。IMAS 的数据字典是一个开放的数据模型，它可以被托卡马克物理实验的数据处理程序所使用，也可以被托卡马克物理实验的数据分析程序所使用。

IMAS 数据字典不仅仅定义了描述托卡马克装置的物理量数据模型，也在其数据的文本描述中涉及了物理量的定义和物理量之间的约束。这使其可以在一定程度上视为托卡马克本体（Ontology）表述。但 IMAS 数据字典没有完整给出的物理量之间的计算关系，物理量的计算方法。这些计算关系和计算方法是托卡马克物理实验的物理模型，是托卡马克物理实验的物理模拟器。在 IMAS 数据字典中，物理量之间的约束关系是以文本的形式给出的，这种文本形式的物理模型是一种静态的、不可执行的物理模型。我们需要将这种静态的、不可执行的物理模型转换为动态的、可执行的物理模型，即将物理模型的计算关系和计算方法转换为计算机程序。这种转换过程是一个非常复杂的过程，需要对物理模型的计算关系和计算方法进行解析、分析、转换、优化、编译、执行等一系列操作。这种转换过程是托卡马克数据分析和物理建模中关键的一步，也是最为复杂的一步。“集成建模”中的“建模”就是指这种物理模型的转换过程。或者说，“集成建模”是将静态的 Ontology 描述转换为动态的计算机程序，并集成在一起，以实现对于装置整体行为的分析和预言，可称之为基于 Ontology 的建模。

```{tip}
Ontology是形而上学的一个基本分支，又译为物性论、存在论或系论。它的英文单词ontology源于希腊语词根ont-（存在）和logia（学问）的组合。Ontology的目的是定义一个专业领域内的词汇，并描述这些词汇之间的关系。它类似于字典或术语表，但不同的是，它能让计算机处理更多内容的细节和结构。

在人工智能和信息领域，Ontology 是（特定领域）信息组织的一种形式，是领域知识规范的抽象和描述，是表达、共享、重用知识的方法。Ontology 是知识图谱构建的关键技术，它的关键在于让计算机能够处理人类的知识。
```

{{FyTok}} 的设计目标是从托卡马克 Ontology 出发，将物理模型抽象为 Ontology 中的概念，将物理模型的输入输出抽象为 Ontology 中的属性，将物理模型的参数抽象为 Ontology 中的实例，将物理模型的计算过程抽象为 Ontology 中的关系，将物理模型的计算结果抽象为 Ontology 中的实例。通过将静态数据与具体功能函数/程序绑定，使得用户可以通过简单的配置，实现复杂的数据处理和物理建模。

{{FyTok}} 以 IMAS 数据字典作为核心数据模型，遵循其分层树状（hierarchical tree）结构，通过将具体的数值计算过程绑定到静态的树状结构上，构成动态的计算模型，实现从静态的 Ontology 描述到动态的计算模型的转换。并在此基础上，实现对物理模型的计算关系和计算方法的管理和维护，实现对物理模型的计算关系和计算方法的复用和共享，实现对物理模型的计算关系和计算方法的集成和耦合，实现对物理模型的计算关系和计算方法的分析和优化，实现对物理模型的计算关系和计算方法的执行和调用。


{{FyTok}} 主体是一个Python库。借助 Python 语言生态的优势， {{FyTok}} 提供了灵活的插件机制， 可以方便地与其他语言开发的科学计算程序进行集成。

{{FyTok}} 中与具体物理语义无关的基础功能和架构，由项目 {{SpDM}} 提供，包括常用数据文件和数据源的读写，数据语义转换，数据集成，数据可视化，外部程序集成，执行流管理等等。 


## Outline
- 简介：
    - 教程的目标和预期结果。
    - 需要的先决条件和知识水平。

- 环境设置：
    - 如何准备开发环境，包括安装必要的软件和工具。
    - 如何设置项目或工作空间。

- 步骤详解：
    - 分步指导用户完成主要任务或学习关键概念。
    - 每一步应该清晰、具体，并提供足够的细节。

- 代码示例：
    - 提供代码示例和解释，帮助用户理解如何实现特定功能。
    - 确保代码是最新的，并且可以正常工作。

- 实践练习：
    - 提供练习或挑战，让用户自己尝试，以加深理解和记忆。
    - 练习应该覆盖教程中讨论的关键点。

- 问题排查：
    - 列出常见问题及其解决方案，帮助用户解决在学习过程中可能遇到的障碍。

- 进一步学习资源：
    - 提供链接到更深入的学习材料、官方文档或相关社区，以便用户可以继续探索更多内容。

- 总结：
    - 回顾教程中学到的主要概念和技能。
    - 提供关于如何使用新学到的知识的建议或提示。